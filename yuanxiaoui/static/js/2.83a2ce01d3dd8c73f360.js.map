{"version":3,"sources":["webpack:///src/views/index/index.vue","webpack:///./src/views/index/index.vue?70b2","webpack:///./src/views/index/index.vue","webpack:///./src/views/index/index.vue?68d2","webpack:///./src/assets/img/headImg02.jpg","webpack:///./src/views/index/index.vue?08b1"],"names":["index","name","data","headImg02","__webpack_require__","bgk","inforText","list","hisMsgList","websock","id","headimgurl","type","show","img","imgIdex","inx","url","mounted","this","$route","query","created","initWebSocket","window","addEventListener","document","activeElement","tagName","setTimeout","scrollIntoViewIfNeeded","methods","writeMessageFun","ev","clickImg","blur","event","This","currentTarget","scrollIntoView","block","behavior","focus","el","$refs","scrollTop","scrollHeight","clickFasong","that","wsonopen","push","state","headImg","text","scrollBottm","WebSocket","onopen","onerror","wsonerror","onmessage","wsonmessage","onclose","wsclose","alert","actions","uid","msg","readyState","send","stringify_default","_actions","console","log","JSON","parse","length","i","resMsg","code","userMsg","_i","e","clickLingqu","$router","path","destroyed","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","src","_v","ref","_l","item","key","class","directives","rawName","value","expression","on","click","$event","domProps","innerHTML","_s","_e","placeholder","keyup","indexOf","_k","keyCode","preventDefault","input","target","composing","style","_withStripped","esExports","staticRenderFns","views_index","disposed","Component","normalizeComponent","ssrContext","options","__file","__webpack_exports__","content","module","locals","exports","p","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/2.83a2ce01d3dd8c73f360.js","sourcesContent":["<template>\n  <div class=\"index\">\n    <img :src=\"bgk\" class=\"bgk\" />\n    <div class=\"infor-box\" ref=\"infor-box\" id=\"infor-box\">\n      <ul>\n        <li\n          v-for=\"(item, index) in list\"\n          :key=\"index\"\n          :class=\"item.state == '1' ? 'my-info' : 'get-info'\"\n        >\n          <img\n            :src=\"item.state == '1' ? item.headImg : headImg02\"\n            :class=\"item.state == '1' ? 'me-headimg' : 'get-headimg'\"\n          />\n          <div\n            :class=\"item.state == '1' ? 'me-chatcontent' : 'get-chatcontent'\"\n          >\n            <!-- <van-image-preview\n              v-model=\"show\"\n              :images=\"img\"\n              :start-position=\"inx\"\n              :show-index=\"false\"\n            >\n            </van-image-preview> -->\n            <div class=\"preview\" v-show=\"show\" @click=\"writeMessageFun\">\n              <img :src=\"url\" />\n            </div>\n            <img\n              :src=\"item.url\"\n              v-if=\"item.code === '00003'\"\n              class=\"urlImg\"\n              @click=\"clickImg(item.url)\"\n            />\n            <p v-else>\n              <span v-html=\"item.text\">{{ item.text }}</span>\n              <br />\n              <span\n                v-if=\"item.code === '00000'\"\n                @click=\"clickLingqu\"\n                class=\"click-lingqu\"\n                >点击领取</span\n              >\n            </p>\n          </div>\n        </li>\n      </ul>\n    </div>\n    <div class=\"footer\">\n      <input\n        type=\"text\"\n        v-model=\"inforText\"\n        @keyup.enter=\"clickFasong\"\n        placeholder=\"请输入回复信息\"\n        @blur.prevent=\"blur\"\n        @focus=\"focus\"\n        id=\"input\"\n      />\n      <button\n        @click=\"clickFasong\"\n        :style=\"\n          inforText == ''\n            ? 'background-color:#aeaeae;'\n            : 'background-color:#03c;'\n        \"\n      >\n        发送\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      headImg02: require(\"../../assets/img/headImg02.jpg\"),\n      bgk:\n        \"http://res.thewm.cn/zlbean//uploadpath/goodimage/86dcae6a985c48e4ab3e06eca103b4f7_bg0.png\",\n      inforText: \"\",\n      list: [],\n      hisMsgList: [],\n      websock: null,\n      id: \"\",\n      headimgurl: \"\",\n      type: 1,\n      show: false,\n      img: [],\n      imgIdex: [],\n      inx: \"0\",\n      url:''\n    };\n  },\n  mounted() {\n    let that = this;\n    that.id = this.$route.query.id;\n    that.headimgurl = this.$route.query.headimgurl;\n  },\n  created() {\n    let that = this;\n    this.initWebSocket();\n    window.addEventListener(\"resize\", function () {\n      if (\n        document.activeElement.tagName === \"INPUT\" ||\n        document.activeElement.tagName === \"TEXTAREA\"\n      ) {\n        window.setTimeout(function () {\n          document.activeElement.scrollIntoViewIfNeeded();\n        }, 0);\n      }\n    });\n  },\n  methods: {\n    // clickImg(index) {\n    //   this.show = true;\n    //   for (let i = 0; i < this.imgIdex.length; i++) {\n    //     if (this.imgIdex[i] === index) {\n    //       this.inx = i;\n    //     }\n    //   }\n    // },\n    writeMessageFun (ev) {\n　　　　　　this.show = false;\n　　},\n    clickImg(url) {\n      this.show = true;\n      this.url = url\n    },\n    blur(event) {\n      let This = event.currentTarget;\n      setTimeout(() => {\n        This.scrollIntoView({\n          block: \"end\",\n          behavior: \"smooth\",\n        });\n      }, 100);\n    },\n    focus(event) {\n      let el = this.$refs[\"infor-box\"];\n      el.scrollTop = el.scrollHeight;\n      let This = event.currentTarget;\n      setTimeout(() => {\n        This.scrollIntoView({\n          block: \"end\",\n          behavior: \"smooth\",\n        });\n      }, 100);\n    },\n    clickFasong() {\n      let that = this;\n      that.type = 2;\n      if (that.inforText == \"\") {\n        return;\n      }\n      that.wsonopen();\n      that.list.push({\n        state: \"1\",\n        headImg: that.headimgurl,\n        text: that.inforText,\n      });\n      setTimeout(() => {\n        that.scrollBottm();\n      }, 100);\n      that.inforText = \"\";\n    },\n    initWebSocket() {\n      let that = this;\n      if (\"WebSocket\" in window) {\n        let ws = \"ws://211.159.184.84:58080/webSocket\";\n        that.websock = new WebSocket(ws);\n        that.websock.onopen = that.wsonopen;\n        that.websock.onerror = that.wsonerror;\n        that.websock.onmessage = that.wsonmessage;\n        that.websock.onclose = that.wsclose;\n      } else {\n        alert(\"您的浏览器不支持 WebSocket!\");\n      }\n    },\n    wsonopen: function () {\n      let that = this;\n      if (that.type === 1) {\n        let actions = {\n          uid: that.id,\n          msg: \"comein\",\n        };\n        if (this.websock.readyState === 1) {\n          this.websock.send(JSON.stringify(actions)); //连接建立之后执行send方法发送数据\n        } else {\n        }\n      } else {\n        let actions = {\n          uid: that.id,\n          msg: that.inforText,\n        };\n        if (this.websock.readyState === 1) {\n          this.websock.send(JSON.stringify(actions)); //连接建立之后执行send方法发送数据\n        } else {\n        }\n      }\n    },\n    wsonerror: function () {\n      console.log(\"连接错误\");\n    },\n    wsonmessage: function (msg) {\n      let that = this;\n      let data = JSON.parse(msg.data);\n      let hisMsgList = data.hisMsgList;\n      if (\n        typeof hisMsgList != \"undefined\" &&\n        hisMsgList != null &&\n        hisMsgList.length != 0\n      ) {\n        for (let i = 0; i < hisMsgList.length; i++) {\n          if (hisMsgList[i].type === \"0\") {\n            this.list.push({\n              state: \"2\",\n              text: hisMsgList[i].resMsg,\n              code: hisMsgList[i].code,\n              url: hisMsgList[i].url,\n            });\n          } else if (hisMsgList[i].type === \"1\") {\n            this.list.push({\n              state: \"1\",\n              text: hisMsgList[i].userMsg,\n              code: \"00001\",\n              headImg: that.headimgurl,\n            });\n            this.list.push({\n              state: \"2\",\n              text: hisMsgList[i].resMsg,\n              code: hisMsgList[i].code,\n              url: hisMsgList[i].url,\n            });\n          }\n        }\n        setTimeout(() => {\n          that.scrollBottm();\n        }, 100);\n      } else {\n        this.list.push({\n          state: \"2\",\n          text: data.msg,\n          code: data.code,\n          url: data.url,\n        });\n        setTimeout(() => {\n          that.scrollBottm();\n        }, 100);\n      }\n      for (let i = 0; i < that.list.length; i++) {\n        if (that.list[i].code === \"00003\") {\n          that.img.push(that.list[i].url);\n          that.imgIdex.push(i);\n        }\n      }\n    },\n    wsclose: function (e) {\n      let that = this;\n      if (e.code == 1006) {\n        that.list = [];\n        setTimeout(function () {\n          that.initWebSocket();\n        }, 5000);\n      }\n    },\n    scrollBottm() {\n      let el = this.$refs[\"infor-box\"];\n      el.scrollTop = el.scrollHeight;\n    },\n    clickLingqu() {\n      this.$router.push({ path: \"/receive\" });\n    },\n  },\n\n  destroyed() {\n    this.websock.onclose = this.wsclose; //离开路由之后断开websocket连接\n  },\n};\n</script>\n\n<style>\n.viewer-footer {\n  display: none;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/index/index.vue","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"index\" }, [\n    _c(\"img\", { staticClass: \"bgk\", attrs: { src: _vm.bgk } }),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        ref: \"infor-box\",\n        staticClass: \"infor-box\",\n        attrs: { id: \"infor-box\" }\n      },\n      [\n        _c(\n          \"ul\",\n          _vm._l(_vm.list, function(item, index) {\n            return _c(\n              \"li\",\n              { key: index, class: item.state == \"1\" ? \"my-info\" : \"get-info\" },\n              [\n                _c(\"img\", {\n                  class: item.state == \"1\" ? \"me-headimg\" : \"get-headimg\",\n                  attrs: {\n                    src: item.state == \"1\" ? item.headImg : _vm.headImg02\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  {\n                    class:\n                      item.state == \"1\" ? \"me-chatcontent\" : \"get-chatcontent\"\n                  },\n                  [\n                    _c(\n                      \"div\",\n                      {\n                        directives: [\n                          {\n                            name: \"show\",\n                            rawName: \"v-show\",\n                            value: _vm.show,\n                            expression: \"show\"\n                          }\n                        ],\n                        staticClass: \"preview\",\n                        on: { click: _vm.writeMessageFun }\n                      },\n                      [_c(\"img\", { attrs: { src: _vm.url } })]\n                    ),\n                    _vm._v(\" \"),\n                    item.code === \"00003\"\n                      ? _c(\"img\", {\n                          staticClass: \"urlImg\",\n                          attrs: { src: item.url },\n                          on: {\n                            click: function($event) {\n                              return _vm.clickImg(item.url)\n                            }\n                          }\n                        })\n                      : _c(\"p\", [\n                          _c(\n                            \"span\",\n                            { domProps: { innerHTML: _vm._s(item.text) } },\n                            [_vm._v(_vm._s(item.text))]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\"br\"),\n                          _vm._v(\" \"),\n                          item.code === \"00000\"\n                            ? _c(\n                                \"span\",\n                                {\n                                  staticClass: \"click-lingqu\",\n                                  on: { click: _vm.clickLingqu }\n                                },\n                                [_vm._v(\"点击领取\")]\n                              )\n                            : _vm._e()\n                        ])\n                  ]\n                )\n              ]\n            )\n          }),\n          0\n        )\n      ]\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"footer\" }, [\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.inforText,\n            expression: \"inforText\"\n          }\n        ],\n        attrs: { type: \"text\", placeholder: \"请输入回复信息\", id: \"input\" },\n        domProps: { value: _vm.inforText },\n        on: {\n          keyup: function($event) {\n            if (\n              !$event.type.indexOf(\"key\") &&\n              _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n            ) {\n              return null\n            }\n            return _vm.clickFasong($event)\n          },\n          blur: function($event) {\n            $event.preventDefault()\n            return _vm.blur($event)\n          },\n          focus: _vm.focus,\n          input: function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.inforText = $event.target.value\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        {\n          style:\n            _vm.inforText == \"\"\n              ? \"background-color:#aeaeae;\"\n              : \"background-color:#03c;\",\n          on: { click: _vm.clickFasong }\n        },\n        [_vm._v(\"\\n      发送\\n    \")]\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-498142aa\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-498142aa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/index/index.vue\n// module id = null\n// module chunks = ","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-498142aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-498142aa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/views/index/index.vue\"\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-498142aa\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-498142aa\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/index/index.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-498142aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"07532416\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-498142aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-498142aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-498142aa\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/index/index.vue\n// module id = kqbP\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/headImg02.2ef3d8d.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/headImg02.jpg\n// module id = l5cD\n// module chunks = 2","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.viewer-footer {\\n  display: none;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"F:/VSCode/yuan-xiao/src/views/index/src/views/index/index.vue\"],\"names\":[],\"mappings\":\";AAyRA;EACA,cAAA;CACA\",\"file\":\"index.vue\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"index\\\">\\n    <img :src=\\\"bgk\\\" class=\\\"bgk\\\" />\\n    <div class=\\\"infor-box\\\" ref=\\\"infor-box\\\" id=\\\"infor-box\\\">\\n      <ul>\\n        <li\\n          v-for=\\\"(item, index) in list\\\"\\n          :key=\\\"index\\\"\\n          :class=\\\"item.state == '1' ? 'my-info' : 'get-info'\\\"\\n        >\\n          <img\\n            :src=\\\"item.state == '1' ? item.headImg : headImg02\\\"\\n            :class=\\\"item.state == '1' ? 'me-headimg' : 'get-headimg'\\\"\\n          />\\n          <div\\n            :class=\\\"item.state == '1' ? 'me-chatcontent' : 'get-chatcontent'\\\"\\n          >\\n            <!-- <van-image-preview\\n              v-model=\\\"show\\\"\\n              :images=\\\"img\\\"\\n              :start-position=\\\"inx\\\"\\n              :show-index=\\\"false\\\"\\n            >\\n            </van-image-preview> -->\\n            <div class=\\\"preview\\\" v-show=\\\"show\\\" @click=\\\"writeMessageFun\\\">\\n              <img :src=\\\"url\\\" />\\n            </div>\\n            <img\\n              :src=\\\"item.url\\\"\\n              v-if=\\\"item.code === '00003'\\\"\\n              class=\\\"urlImg\\\"\\n              @click=\\\"clickImg(item.url)\\\"\\n            />\\n            <p v-else>\\n              <span v-html=\\\"item.text\\\">{{ item.text }}</span>\\n              <br />\\n              <span\\n                v-if=\\\"item.code === '00000'\\\"\\n                @click=\\\"clickLingqu\\\"\\n                class=\\\"click-lingqu\\\"\\n                >点击领取</span\\n              >\\n            </p>\\n          </div>\\n        </li>\\n      </ul>\\n    </div>\\n    <div class=\\\"footer\\\">\\n      <input\\n        type=\\\"text\\\"\\n        v-model=\\\"inforText\\\"\\n        @keyup.enter=\\\"clickFasong\\\"\\n        placeholder=\\\"请输入回复信息\\\"\\n        @blur.prevent=\\\"blur\\\"\\n        @focus=\\\"focus\\\"\\n        id=\\\"input\\\"\\n      />\\n      <button\\n        @click=\\\"clickFasong\\\"\\n        :style=\\\"\\n          inforText == ''\\n            ? 'background-color:#aeaeae;'\\n            : 'background-color:#03c;'\\n        \\\"\\n      >\\n        发送\\n      </button>\\n    </div>\\n  </div>\\n</template>\\n\\n<script>\\nexport default {\\n  name: \\\"index\\\",\\n  data() {\\n    return {\\n      headImg02: require(\\\"../../assets/img/headImg02.jpg\\\"),\\n      bgk:\\n        \\\"http://res.thewm.cn/zlbean//uploadpath/goodimage/86dcae6a985c48e4ab3e06eca103b4f7_bg0.png\\\",\\n      inforText: \\\"\\\",\\n      list: [],\\n      hisMsgList: [],\\n      websock: null,\\n      id: \\\"\\\",\\n      headimgurl: \\\"\\\",\\n      type: 1,\\n      show: false,\\n      img: [],\\n      imgIdex: [],\\n      inx: \\\"0\\\",\\n      url:''\\n    };\\n  },\\n  mounted() {\\n    let that = this;\\n    that.id = this.$route.query.id;\\n    that.headimgurl = this.$route.query.headimgurl;\\n  },\\n  created() {\\n    let that = this;\\n    this.initWebSocket();\\n    window.addEventListener(\\\"resize\\\", function () {\\n      if (\\n        document.activeElement.tagName === \\\"INPUT\\\" ||\\n        document.activeElement.tagName === \\\"TEXTAREA\\\"\\n      ) {\\n        window.setTimeout(function () {\\n          document.activeElement.scrollIntoViewIfNeeded();\\n        }, 0);\\n      }\\n    });\\n  },\\n  methods: {\\n    // clickImg(index) {\\n    //   this.show = true;\\n    //   for (let i = 0; i < this.imgIdex.length; i++) {\\n    //     if (this.imgIdex[i] === index) {\\n    //       this.inx = i;\\n    //     }\\n    //   }\\n    // },\\n    writeMessageFun (ev) {\\n　　　　　　this.show = false;\\n　　},\\n    clickImg(url) {\\n      this.show = true;\\n      this.url = url\\n    },\\n    blur(event) {\\n      let This = event.currentTarget;\\n      setTimeout(() => {\\n        This.scrollIntoView({\\n          block: \\\"end\\\",\\n          behavior: \\\"smooth\\\",\\n        });\\n      }, 100);\\n    },\\n    focus(event) {\\n      let el = this.$refs[\\\"infor-box\\\"];\\n      el.scrollTop = el.scrollHeight;\\n      let This = event.currentTarget;\\n      setTimeout(() => {\\n        This.scrollIntoView({\\n          block: \\\"end\\\",\\n          behavior: \\\"smooth\\\",\\n        });\\n      }, 100);\\n    },\\n    clickFasong() {\\n      let that = this;\\n      that.type = 2;\\n      if (that.inforText == \\\"\\\") {\\n        return;\\n      }\\n      that.wsonopen();\\n      that.list.push({\\n        state: \\\"1\\\",\\n        headImg: that.headimgurl,\\n        text: that.inforText,\\n      });\\n      setTimeout(() => {\\n        that.scrollBottm();\\n      }, 100);\\n      that.inforText = \\\"\\\";\\n    },\\n    initWebSocket() {\\n      let that = this;\\n      if (\\\"WebSocket\\\" in window) {\\n        let ws = \\\"ws://211.159.184.84:58080/webSocket\\\";\\n        that.websock = new WebSocket(ws);\\n        that.websock.onopen = that.wsonopen;\\n        that.websock.onerror = that.wsonerror;\\n        that.websock.onmessage = that.wsonmessage;\\n        that.websock.onclose = that.wsclose;\\n      } else {\\n        alert(\\\"您的浏览器不支持 WebSocket!\\\");\\n      }\\n    },\\n    wsonopen: function () {\\n      let that = this;\\n      if (that.type === 1) {\\n        let actions = {\\n          uid: that.id,\\n          msg: \\\"comein\\\",\\n        };\\n        if (this.websock.readyState === 1) {\\n          this.websock.send(JSON.stringify(actions)); //连接建立之后执行send方法发送数据\\n        } else {\\n        }\\n      } else {\\n        let actions = {\\n          uid: that.id,\\n          msg: that.inforText,\\n        };\\n        if (this.websock.readyState === 1) {\\n          this.websock.send(JSON.stringify(actions)); //连接建立之后执行send方法发送数据\\n        } else {\\n        }\\n      }\\n    },\\n    wsonerror: function () {\\n      console.log(\\\"连接错误\\\");\\n    },\\n    wsonmessage: function (msg) {\\n      let that = this;\\n      let data = JSON.parse(msg.data);\\n      let hisMsgList = data.hisMsgList;\\n      if (\\n        typeof hisMsgList != \\\"undefined\\\" &&\\n        hisMsgList != null &&\\n        hisMsgList.length != 0\\n      ) {\\n        for (let i = 0; i < hisMsgList.length; i++) {\\n          if (hisMsgList[i].type === \\\"0\\\") {\\n            this.list.push({\\n              state: \\\"2\\\",\\n              text: hisMsgList[i].resMsg,\\n              code: hisMsgList[i].code,\\n              url: hisMsgList[i].url,\\n            });\\n          } else if (hisMsgList[i].type === \\\"1\\\") {\\n            this.list.push({\\n              state: \\\"1\\\",\\n              text: hisMsgList[i].userMsg,\\n              code: \\\"00001\\\",\\n              headImg: that.headimgurl,\\n            });\\n            this.list.push({\\n              state: \\\"2\\\",\\n              text: hisMsgList[i].resMsg,\\n              code: hisMsgList[i].code,\\n              url: hisMsgList[i].url,\\n            });\\n          }\\n        }\\n        setTimeout(() => {\\n          that.scrollBottm();\\n        }, 100);\\n      } else {\\n        this.list.push({\\n          state: \\\"2\\\",\\n          text: data.msg,\\n          code: data.code,\\n          url: data.url,\\n        });\\n        setTimeout(() => {\\n          that.scrollBottm();\\n        }, 100);\\n      }\\n      for (let i = 0; i < that.list.length; i++) {\\n        if (that.list[i].code === \\\"00003\\\") {\\n          that.img.push(that.list[i].url);\\n          that.imgIdex.push(i);\\n        }\\n      }\\n    },\\n    wsclose: function (e) {\\n      let that = this;\\n      if (e.code == 1006) {\\n        that.list = [];\\n        setTimeout(function () {\\n          that.initWebSocket();\\n        }, 5000);\\n      }\\n    },\\n    scrollBottm() {\\n      let el = this.$refs[\\\"infor-box\\\"];\\n      el.scrollTop = el.scrollHeight;\\n    },\\n    clickLingqu() {\\n      this.$router.push({ path: \\\"/receive\\\" });\\n    },\\n  },\\n\\n  destroyed() {\\n    this.websock.onclose = this.wsclose; //离开路由之后断开websocket连接\\n  },\\n};\\n</script>\\n\\n<style>\\n.viewer-footer {\\n  display: none;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-498142aa\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/index/index.vue\n// module id = oWqY\n// module chunks = 2"],"sourceRoot":""}