webpackJsonp([3],{EtOo:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("P9l9"),i={name:"ExchangeSuccess",data:function(){return{giftId:"",show:!1,show1:!1,giftType:"",giftname:"",isDisable:!0,status:""}},mounted:function(){var n=this;this.giftId=this.$route.query.giftId,this.status=this.$route.query.status,document.title="",0!=this.giftId?this.show=!0:this.show=!1,"-2"==this.status||"-1"==this.status?(document.title="领奖",this.show1=!1):(document.title="兑换成功",this.show1=!0),"-1"==this.status?(canvas.style.display="none",this.getScratchPrizeData()):this.$nextTick(function(){var t=document.getElementById("canvas"),e=t.getContext("2d"),s=function(n){var t=0,e=0;return function n(s){t+=s.offsetLeft;e+=s.offsetTop;"BODY"!=s.offsetParent.tagName&&n(s.offsetParent);return[t,e]}(n)}(t),i=s[0],a=s[1];e.beginPath(),e.fillStyle="#ccc",e.fillRect(0,0,t.width,t.height),e.font="20px bold 黑体",e.fillStyle="red",e.textAlign="center",e.textBaseline="middle",e.fillText("开始刮奖",155,80),e.closePath(),document.addEventListener("touchstart",function(){e.beginPath(),e.lineWidth=30,e.globalCompositeOperation="destination-out",e.moveTo(event.touches[0].pageX-i,event.touches[0].pageY-a+25)},!1),document.addEventListener("touchmove",function(){e.lineTo(event.touches[0].pageX-i,event.touches[0].pageY-a+25),e.stroke()}),t.addEventListener("touchstart",function(n){var s;s=(s=function(){for(var n=e.getImageData(0,0,t.width,t.height).data,s=[],i=0;i<n.length;i+=4)n[i+3]<128&&s.push(n[i+3]);return(s.length/(n.length/4)*100).toFixed(2)+"%"}())||0,parseInt(s)>25&&(t.style.display="none",c.getScratchPrizeData())});var c=n})},methods:{getScratchPrizeData:function(){var n=this;this.$postRequest(s.ScratchPrize,{giftId:this.giftId}).then(function(t){if("0000"==t.data.code){var e=t.data.data.gift;n.giftType=e.giftType,n.giftname=e.giftname}})},submAcceptAward:function(){var n=this;0!=this.isDisable&&(this.isDisable=!1,this.$postRequest(s.AcceptAward,{giftId:this.giftId}).then(function(t){n.isDisable=!0,"0000"==t.data.code&&(window.location.href=t.data.data.gift.url)}))}}},a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"exchange-success"},[e("div",{staticClass:"success"},[e("i",{class:"-2"==n.status||"-1"==n.status?"iconfont icon-lipin icon-success":"iconfont icon-chenggong icon-success"}),n._v(" "),e("p",[n._v(n._s("-2"==n.status?"在下方可进行抽奖活动哦":"-1"==n.status?"在下面抽奖区可领取您的奖品哦":"兑换礼品成功")+"\n      ")])]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.show,expression:"show"}],staticClass:"chance-to-draw"},[e("p",{directives:[{name:"show",rawName:"v-show",value:n.show1,expression:"show1"}]},[n._v("恭喜您！额外获得1次抽奖机会")]),n._v(" "),e("div",{staticClass:"scraping-card"},[e("div",{staticClass:"canvas-box"},[e("div",{staticClass:"winning-results",attrs:{id:"prize"}},[""!=n.giftType?e("span",{staticClass:"winres-text"},[n._v("\n                  "+n._s("0"==n.giftType?"恭喜您！获得"+n.giftname:"获得"+n.giftname)+"\n                  ")]):n._e(),n._v(" "),""==n.giftType?e("span",{staticClass:"winres-text"},[n._v("继续刮刮...")]):n._e(),n._v(" "),e("van-button",{staticClass:"winres-but",nativeOn:{click:function(t){return n.submAcceptAward(t)}}},[n._v("领"),e("br"),n._v("奖")])],1),n._v(" "),e("canvas",{attrs:{id:"canvas"}})])])]),n._v(" "),n._m(0)])};a._withStripped=!0;var c={render:a,staticRenderFns:[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"exchange-tips"},[t("span",{staticClass:"tips-text"},[this._v("温馨提示：")]),this._v(" "),t("span",{staticClass:"describe-text"},[this._v("1、成条（五份）兑换可获得一次抽奖机会，最高获奖者千元奖励")])])}]},o=c;var r=!1;var u=e("VU/8")(i,o,!1,function(n){r||e("IRIH")},null,null);u.options.__file="src/views/ExchangeSuccess/ExchangeSuccess.vue";t.default=u.exports},IRIH:function(n,t,e){var s=e("iUoI");"string"==typeof s&&(s=[[n.i,s,""]]),s.locals&&(n.exports=s.locals);e("rjj0")("794402d6",s,!1,{})},iUoI:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"ExchangeSuccess.vue",sourceRoot:""}])}});
//# sourceMappingURL=3.109d64fb8d7d14deadcf.js.map